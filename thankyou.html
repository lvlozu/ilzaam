<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>✅ Booking Confirmed</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Background layers: JPG base + GIF swap; place BG below content */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url('BG.jpg') center/cover no-repeat;
      z-index: -2; /* sits under the scrim */
    }
    body.gif-bg::before {
      background-image: url('BG.gif?v=2'); /* cache-buster */
    }

    /* Soft global scrim (not a box): boosts contrast but keeps BG visible */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      /* combination of radial vignette + gentle top/bottom gradient */
      background:
        radial-gradient(ellipse at center,
          rgba(0,0,0,0) 0%,
          rgba(0,0,0,0.22) 55%,
          rgba(0,0,0,0.45) 100%),
        linear-gradient(to bottom,
          rgba(0,0,0,0.35) 0%,
          rgba(0,0,0,0) 30%,
          rgba(0,0,0,0) 70%,
          rgba(0,0,0,0.35) 100%);
      pointer-events: none; /* no clicks blocked */
      z-index: -1;          /* above BG, below content */
    }

    /* Readability boost for text only (no blur): layered text-shadow */
    .readable, .readable * {
      text-shadow:
        0 1px 2px rgba(0,0,0,0.85),
        0 0 12px rgba(0,0,0,0.55);
    }

    .copy-btn {
      cursor: pointer;
      background-color: #e0e7ff;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.875rem;
    }
  </style>
</head>
<body class="p-6 text-gray-100"> <!-- slight lighter text base -->

  <!-- Removed any white/blur boxes. Added .readable for contrast -->
  <div class="max-w-xl mx-auto p-6 rounded shadow readable">
    <h1 class="text-2xl font-bold text-green-400 mb-4 text-center">🎉 Booking Successful</h1>
    
    <div class="mb-4">
      <p class="font-medium">👤 Booked By: <span id="fullName"></span></p>
      <p class="font-medium">📞 Contact: <span id="phone"></span></p>
    </div>

    <div id="bookingDetails" class="mb-4 bg-black/20 p-4 rounded text-sm"></div>

    <div class="mb-4">
      <p class="font-semibold">💰 Ticket Price: 100 MVR</p>
      <p class="font-semibold">🎫 Total Tickets: <span id="totalTickets"></span></p>
      <p class="font-semibold">💵 Total Amount: <span id="totalAmount"></span> MVR</p>
    </div>

    <div class="mb-4">
      <p class="mb-1">📤 Please transfer the amount to:</p>
      <div class="flex items-center space-x-2">
        <span class="font-mono">7730000654882 – BIZOLVE</span>
        <button class="copy-btn" onclick="copyAccount()">📋 Copy</button>
      </div>
      <p class="mt-1 text-sm">📞 Viber to 7981238 (irfan)</p>
    </div>

    <p class="text-sm text-red-300 mb-2">
      ⚠️ Your booking will only be confirmed after payment is sent and verified. 
      Please complete the payment within <b>60 minutes</b> of booking.
    </p>

    <p class="text-sm mt-4">
      📸 Please take a screenshot of this page for your reference.
    </p>

    <!-- Bottom Thank You Section -->
    <div class="mt-8 text-center">
      <h2 class="text-2xl font-bold text-green-300 leading-tight">Thank You</h2>
      <h3 class="text-xl font-semibold text-green-200 mb-4">See You at The Movie</h3>
    </div>

    <div class="text-left mb-6">
      <p class="font-medium">🎥 ILZAAM - The Movie</p>
      <p>📅 31st October 2025 (Friday Night)</p>
      <p>📍 Miladhoo Youth Center</p>
    </div>

    <div class="text-center">
      <!-- Set a flag + hash so index skips landing on first load -->
      <a href="index.html#book"
         onclick="sessionStorage.setItem('skipLanding','1')"
         class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded inline-block">
        🎫 Book Another Ticket
      </a>
    </div>
  </div>

  <script>
    // Progressive background: swap to GIF only after it loads (prevents blank/white)
    (function(){
      const img = new Image();
      img.onload = () => document.body.classList.add('gif-bg');
      img.onerror = () => console.warn('BG.gif failed to load (check path/case). Using BG.jpg fallback.');
      img.src = 'BG.gif?v=2';
    })();

    const fullName = localStorage.getItem("bookingFullName") || "N/A";
    const phone = localStorage.getItem("bookingPhone") || "N/A";
    const selectedSeats = JSON.parse(localStorage.getItem("selectedSeats")) || [];

    document.getElementById("fullName").textContent = fullName;
    document.getElementById("phone").textContent = phone;
    document.getElementById("totalTickets").textContent = selectedSeats.length;
    document.getElementById("totalAmount").textContent = selectedSeats.length * 100;

    document.getElementById("bookingDetails").innerHTML = selectedSeats.map(s => {
      const screenName = s.seatId
        .replace('screenA', 'Screen A')
        .replace('screenB', 'Screen B')
        .replace('screenC', 'Screen C');
      return `<div>🎫 ${screenName} – ${s.name}</div>`;
    }).join("");

    function copyAccount() {
      navigator.clipboard.writeText("7730000654882").then(() => {
        alert("Account number copied!");
      }).catch(() => alert("Unable to copy. Try manually."));
    }
  </script>
</body>
</html>
